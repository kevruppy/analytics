TODO:
adjust models to consider:
- add _added_at and _updated_at
constraints
exchange rates via api


delete + reinsert does not work (write own mat):
select order_id
from marts.mrt_orders mo 
except select * from yy 



create or replace temp table yy as 
WITH CTE AS (
select (LOAD_RESULT->>'ORDER_ID')::INTEGER AS ORDER_ID,
(LOAD_RESULT->>'IS_TEST_ORDER')::BOOLEAN AS IS_TEST
from RAW_DATA.ORDERS
), x as (
SELECT ORDER_ID, CASE WHEN LIST_CONTAINS(ARRAY_AGG(DISTINCT IS_TEST),TRUE) THEN TRUE ELSE FALSE END AS IS_INVALID_ORDER
FROM CTE 
GROUP BY ALL 
)
SELECT distinct order_id FROM X WHERE IS_INVALID_ORDER = FALSE

streamlit



https://neon.tech/

add exposures to models
https://blog.streamlit.io/host-your-streamlit-app-for-free/



dbt docs generate / serve


dbt_project_evaluator

jsonschema only for ci but not in VS Code...


snapshots
- sqlfluff should lint dbt tests properly

(add more data e.g. product info, web traffic, customer whatever, channel costs)



- prettify dbt stuff (make test.py a pre-commit hook)

- pre-commit hooks (seems to require mounting option in devcontainer json)




- build dim & fact models
- semantical layer
- check some BI tool
- check dbt cloud
- check github actions
- check github branching
- check how this project would work with BigQuery
- check best practives for dockerfile
- check if we set requirements the right way
- check scheduling
- cli script to build dbt project (or Python? maybe a class?)
--> https://docs.getdbt.com/reference/programmatic-invocations



out of scope:

- python formatters (no need for ruff, pylint is fine)

- dist test with this sample (leading 1 appears x %, leadin 2 appears y% log etc.)

Links:
https://docs.getdbt.com/docs/build/dbt-tips
https://github.com/dbt-labs/dbt-utils
https://hub.getdbt.com/
https://github.com/Velir/dbt-ga4
https://docs.getdbt.com/reference/resource-configs/contract
https://github.com/dbt-labs/dbt-jsonschema
